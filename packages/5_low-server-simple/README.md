# MCP 服务器示例

这个项目展示了如何使用 MCP (Model Context Protocol) SDK 创建服务器，支持工具调用、资源管理和提示模板功能。

## 可用示例

### 1. 工具调用服务器 (simple-tools.ts)

展示了如何创建一个支持工具调用能力的 MCP 服务器。提供了以下示例工具：

- 天气查询：获取指定城市的天气信息

### 2. 资源管理服务器 (simple-resource.ts)

展示了如何创建一个支持资源管理能力的 MCP 服务器。支持以下功能：

- 支持虚拟文件系统
- 支持多级目录结构
- 支持列出根目录
- 支持读取资源内容
- 支持列出目录内容
- 支持创建、更新和删除资源

### 3. 提示模板服务器 (simple-prompt.ts)

展示了如何创建一个支持提示模板能力的 MCP 服务器。提供以下示例提示模板：

- 电子邮件模板：生成一封专业的电子邮件
- 文本总结：将长文本总结为简洁的要点
- 客户服务回复：生成针对客户问题的专业回复

## 安装与运行

### 安装依赖

```bash
npm install
```

### 构建项目

```bash
npm run build
```

### 运行工具调用服务器

```bash
npm start
# 或使用开发模式
npm run dev
```

### 运行资源管理服务器

```bash
npm run start:resource
# 或使用开发模式
npm run dev:resource
```

### 运行提示模板服务器

```bash
npm run start:prompt
# 或使用开发模式
npm run dev:prompt
```

## 服务器能力

### 工具调用服务器

- 支持获取可用工具列表
- 支持调用指定工具并获取结果

### 资源管理服务器

- 支持列出根目录
- 支持读取资源内容
- 支持列出目录内容
- 支持创建文件和目录
- 支持更新资源名称和内容
- 支持删除资源

### 提示模板服务器

- 支持获取可用提示模板列表
- 支持根据ID获取特定提示模板的详细信息
- 每个提示模板包含模板文本和参数定义

## 传输层

所有示例都使用 STDIO 传输层，通过标准输入/输出进行通信，适合与命令行工具或其他程序集成。

## 使用方式

这些示例服务器可以与支持 MCP 协议的客户端进行交互，例如与大型语言模型工具一起使用，以提供工具调用、资源管理或提示模板功能。

## 项目结构

```
src/
  ├── index.ts           # 工具调用服务器示例
  └── simple-resource.ts # 资源管理服务器示例
```

## 安装

```bash
# 安装依赖
npm install
```

## 构建和运行

```bash
# 构建项目（生产环境使用）
npm run build

# 启动默认服务器（工具调用示例）
npm start

# 启动资源管理服务器
node dist/simple-resource.js

# 开发模式启动（使用tsx直接运行TypeScript代码，无需编译）
# 默认示例
npm run dev
# 或资源示例
npx tsx src/simple-resource.ts

# 清理构建产物
npm run clean
```

## 资源管理服务器

### 功能特点

- 提供虚拟文件系统，支持文件和目录的浏览
- 实现文件内容读取功能
- 支持多层目录结构

### 支持的请求

1. **获取根目录列表**

   - 调用 `resources/listRoots` 方法获取可用根目录

2. **读取资源内容**

   - 使用 `resources/read` 方法读取文件内容
   - 需指定资源ID

3. **列出目录内容**
   - 使用 `resources/list` 方法列出目录中的文件和子目录
   - 需指定目录ID

### 可用资源

- **根目录**:

  - `root-docs`: 文档目录
  - `root-code`: 代码示例目录

- **文档目录**包含Markdown文件
- **代码目录**包含JavaScript示例和工具子目录
